/*** Automatic Web Testing Utility* @ver 0.1* @license BSD License - www.opensource.org/licenses/bsd-license.php** Copyright (c) 2013 Sayak Banerjee <mail@sayakbanerjee.com>* All rights reserved. Do not remove this copyright notice.*//*** Popup operations*/var popups = {	/**	* Callback function	*/	callbackFunc: null,	/**	* Callback argument	*/	callbackArg: null,	/**	* Function to show a messagebox	*	* @param title		Message box title	* @param message	Message to be displayed	* @param buttons	Buttons to be displayed on the box	* @param callback	Function invoked if Yes button is clicked	* @param arg		Argument to be passed to the callback	* @returns			boolean	*/	showMessage: function(title, message, buttons, callback, arg) {		$('#popup-message-title').html(title);		$('#popup-message-body').html(message);		// Set the button visibility		$('#popup-message .btn').hide();		switch(buttons) {			case constants.popups.ok:				$('#popup-message-ok').show();				break;			case constants.popups.yesNo:				$('#popup-message-yes').show();				$('#popup-message-no').show();				break;			case constants.popups.yes:				$('#popup-message-yes').show();				break;			case constants.popups.no:				$('#popup-message-no').show();				break;		}		// Set the callback and show the modal		if (typeof(callback) == 'function') {			popups.callbackFunc = callback;			popups.callbackArg = arg;		}		else {			popups.callbackFunc = null;			popups.callbackArg = null;		}		$('#popup-message').modal('show');		return false;	},	/**	* Function invoked on 'yes' or 'ok' button click of a modal window	*	* @param button	Indicates which button on the modal was clicked	* @returns		boolean	*/	messageButton: function(button) {		$('#popup-message')			.off('hidden')			.on('hidden', function() {				if (button == constants.popups.ok || button == constants.popups.yes) {					if (typeof(popups.callbackFunc) == 'function') {						popups.callbackFunc(popups.callbackArg);					}				}			});		$('#popup-message').modal('hide');		return false;	},	/**	* Opens the test case management modal in create/edit mode	*	* @param id	The test case ID to edit	*/	showTestCaseModal: function(id) {		// Clear the modal data		$('#popup-test input[type=text]').val(null);		$('#test-request > tbody > tr.req, #test-response > tbody > tr.resp').remove();		$('#test-method-get').addClass('active');		$('#test-method-post').removeClass('active');		$('#test-resp-exact-yes').addClass('active');		$('#test-resp-exact-no').removeClass('active');		$('#test-parent').html(html.createOption());		$('#popup-test').removeAttr('data-id');		// Clear the profile caches		profiles.request = {};		profiles.response = [];		// Load the dependency list		if (profiles.data.testCases !== undefined) {			$.each(profiles.data.testCases, function(i, test) {				if (test.id != id) {					$('#test-parent').append(html.createOption($.strPad(test.id, 4, 0)));				}			});		}		// Load existing test data		if (id !== undefined) {			var test = profiles.getTest(id);			// Populate general details			$('#popup-test').attr('data-id', test.id);			$('#test-name').val(test.name);			$('#test-url').val(test.url);			$('#test-parent').val($.strPad(test.parent, 4, 0));			if (test.method == 'POST') {				$('#test-method-get').removeClass('active');				$('#test-method-post').addClass('active');			}			// Set the cache values			profiles.request = $.extend(true, {}, test.request);			profiles.response = $.extend(true, [], test.response);			// Load the request params			$.each(test.request, function(param, value) {				var id = encodeURI(param);				var row = html.createTestRequestRow(id, param, value);				$('#test-request-ctrl').before(row);			});			// Load the response params			$.each(test.response, function(i, resp) {				var row = html.createTestResponseRow(resp.id, resp.selector, resp.value, resp.exact);				$('#test-resp-ctrl').before(row);			});		}		$('#popup-test').modal('show');		return false;	}}